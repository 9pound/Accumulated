# Java天问——内部类

### 内部类的定义是什么？

定义在另一个类中的类

### 内部类的特点

访问特权&访问控制&命名控制

- 内部类可以访问该类定义所在域中的数据，包括私有数据
- 内部类对同一包中的其他类隐藏
- 当想要定义一个回调函数却不像编写大量代码时，使用匿名内部类比较便捷

### 什么是嵌套？

一种类之间的关系



### 内部类，访问外围类数据的原理？

- 编译器为内部类生成了外围类的引用final OuterClass this&0
- 编译器修改了所有内部类的构造器，添加了一个外围类引用的参数。



### 补充：

- 内部类对象有一个隐式引用，它引用了实例化该内部对象的外围类对象，通过这个指针，可以访问外围类对象的全部状态。换一种说法：内部类对象总有一个隐式引用，它指向了创建它的外部类对象。但是这个引用在内部类的定义中是不可见的

- 工作过程：当创建内部类对象时，内部类的构造器就将代表外部类的this（this代表类，此处带表外围类）传递给内部类的构造器；所以内部类可以直接使用外部类的域，

- 注意：静态static内部类没有附加这种指针；

- 内部类既可以访问自身的数据域，也可以访问创建它的外围类的数据域；

  

  如果内部类声明为private，那么+

​	内部类是一种编译器现象，与虚拟机无关，编译器会把内部类翻译成用美元符号分隔外部类名与内部类名的常规类文件，而虚拟机对此一无所知，

### 内部类如何管理额外的访问特权？

编译器在外围类中生成static access&0()方法

### 在内部类中表示外围类的应用？

OuterClass.this

### 如何创建内部类的对象？

outerObject.new InnerClass(construction parameters)

### 外围类的作用域之外如何引用内部类？

OuterClass.InnerClass

### 内部类可以是私有的吗？

只有内部类可以是私有类，而常规类只可以具有包可见性或公有可见性；

虚拟机中不存在私有类



### 局部内部类的定义，为什么要

​	1、局部内部类就是在一个方法中定义的类
	2、局部类不能用public或private访问说明符进行声明，它的作用域被限定在声明这个局部类的块中
	3、局部类的特性：
			1、对外部世界可以完全地隐藏起来，
			2、他们不仅能够访问包含他们的外部类，还可以访问局部变量，不过那些局部变量必须被声明为final
	final关键字的总结：1、final关键字可以应用于局部变量，实例变量、静态变量，这些情况下表示的含义都是：在创建者个边两之后，只能为之符一次只，再也不能修改他们的值；
			   2、在定义final变量时，不必进行初始化，这种变量被称为空final变量
			   3、final可以用于数组变量，这仅仅表示该变量不可以引用另外一个数组，但数组中的数据数据元素可以自由的改变
6.4.6匿名内部类
	1、为什么要用匿名内部类：假如只创建这个类的一个对象，就不必为这个类命名了，这种类被称为匿名内部类
	2、匿名类不能有构造器：原因：构造器的名字必须与类名相同而匿名类没有类名

### 静态内部类（嵌套类）

内部类不需要访问外围累的对象

### 为什么要使用静态内部类？

- 如果使用内部类只是为了把一个类隐藏在另外一个类的内部，并不需要内部类引用外围类对象，只需将内部类声明为static即可，取消产生的引用

​	

只有内部类可以声明static，只有内部类可以声明为私有

声明在接口中的中的内部类自动成为static和public

### 应用:如何用一个方法返回两个值？



### 注释

### 如何创建匿名的ArrayList数组？双括号初始化

invite(new ArrayLIst<String>() {

{	 add("Tom");

​	add("Jerry"); 

}

} );

### 静态方法中如何获得当前类的类名？

new Object() { } . getClass() . getEnclosingClass():

